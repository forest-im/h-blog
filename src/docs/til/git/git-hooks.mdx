export const metadata = {
  title: 'Git Hooksì™€ Husky, Lefthook ë¹„êµ',
  tags: ['#git', '#husky', '#lefthook', '#git-hooks'],
  date: '2026-01-11 23:15:07',
}

## Git Hooksë€?

https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks

Gitì˜ íŠ¹ì • ì‘ì—…ì´ ë°œìƒí•  ë•Œ ì‚¬ìš©ì ì •ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. Git ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ê³¼ ì„œë²„ì¸¡ 2ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤.

### í´ë¼ì´ì–¸íŠ¸ ì¸¡

commit, merge ë“±ì˜ ì‘ì—… ì‹œ ì‹¤í–‰ë˜ëŠ” í›…ì´ë‹¤.

- **pre-commit**: ì»¤ë°‹ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ì‹¤í–‰ë˜ë©°, ì½”ë“œ ê²€ì‚¬ë‚˜ í…ŒìŠ¤íŠ¸ ë“±ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤
- **prepare-commit-msg**: ì»¤ë°‹ ë©”ì‹œì§€ í¸ì§‘ê¸°ê°€ ì—´ë¦¬ê¸° ì „ì— ì‹¤í–‰ë˜ë©°, ê¸°ë³¸ ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤
- **commit-msg**: ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ê²€ì¦í•  ë•Œ ì‚¬ìš©ëœë‹¤
- **post-commit**: ì»¤ë°‹ì´ ì™„ë£Œëœ í›„ ì‹¤í–‰ëœë‹¤

### ì„œë²„ì¸¡

pushëœ ì»¤ë°‹ì„ ìˆ˜ì‹ í•  ë•Œ ì‹¤í–‰ë˜ëŠ” í›…ì´ë‹¤.

- **pre-receive**: í´ë¼ì´ì–¸íŠ¸ì˜ í‘¸ì‹œ ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì´ë©°, í‘¸ì‹œë¥¼ ê±°ë¶€í•  ìˆ˜ ìˆë‹¤
- **update**: ê° ë¸Œëœì¹˜ë§ˆë‹¤ í•œ ë²ˆì”© ì‹¤í–‰ë˜ë©°, ë¸Œëœì¹˜ë³„ë¡œ í‘¸ì‹œë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤
- **post-receive**: í‘¸ì‹œê°€ ì™„ë£Œëœ í›„ ì‹¤í–‰ë˜ë©°, ì•Œë¦¼ì´ë‚˜ ë°°í¬ ë“±ì„ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆë‹¤

## ëŒ€í‘œì ì¸ Hooks ê´€ë¦¬ì Husky, Lefthook ë¹„êµ

npm ë‹¤ìš´ë¡œë“œ ìˆ˜ë¥¼ ë¹„êµí–ˆì„ ë•Œ Huskyê°€ ì••ë„ì ìœ¼ë¡œ ë§ì•˜ìœ¼ë©°, ë‹¤ë¥¸ ë„êµ¬ë“¤ê³¼ëŠ” ë¹„êµí•  ìˆ˜ ì—†ëŠ” ìˆ˜ì¤€ì´ì—ˆë‹¤. ìµœì‹  ì—…ë°ì´íŠ¸ ì£¼ê¸°ë¥¼ ë³´ë©´ HuskyëŠ” ì—° ë‹¨ìœ„ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ë°˜ë©´, Lefthookì€ ì¼ ë‹¨ìœ„ë¡œ í™œë°œí•˜ê²Œ ì—…ë°ì´íŠ¸ë˜ê³  ìˆì—ˆë‹¤.

### ì—¬ê¸°ì„œ ì ê¹

HuskyëŠ” Git í›… íŠ¸ë¦¬ê±° ê¸°ëŠ¥ì—ë§Œ ì´ˆì ì´ ë§ì¶°ì ¸ ìˆì–´ì„œ, ì‹¤ë¬´ì—ì„œëŠ” ë³´í†µ lint-stagedì™€ í•¨ê»˜ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í–ˆë‹¤. ë”°ë¼ì„œ ì—¬ê¸°ì„œëŠ” Husky + lint-staged ì¡°í•©ê³¼ Lefthookì„ ë¹„êµí–ˆë‹¤.

### Husky

https://typicode.github.io/husky/

Huskyì˜ ì£¼ìš” íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

- JavaScriptë¡œ ì‘ì„±ë˜ì—ˆë‹¤
- ë³‘ë ¬ ì‹¤í–‰ì„ ì§€ì›í–ˆë‹¤
- ìœ ì—°í•œ ì„¤ì •ì´ ê°€ëŠ¥í–ˆë‹¤
- ì¢…ì†ì„± ì—†ì´ 2KBì˜ ê°€ë²¼ìš´ ìš©ëŸ‰ì´ì—ˆë‹¤
- ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©ë˜ê¸°ë³´ë‹¤ëŠ” ë³´í†µ lint-stagedì™€ ì¡°í•©í•˜ì—¬ ì‚¬ìš©ë˜ì—ˆë‹¤
- ë‹¨ìˆœíˆ Git hookì„ ì‹¤í–‰í•˜ëŠ” ëŸ¬ë„ˆ ì—­í• ë§Œ í–ˆë‹¤

### lint-staged

lint-stagedëŠ” Huskyì™€ í•¨ê»˜ ìì£¼ ì‚¬ìš©ë˜ëŠ” ë„êµ¬ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì´ ìˆë‹¤:

- stagedëœ íŒŒì¼ë§Œ ì²˜ë¦¬í•˜ëŠ” ì „ìš© ë„êµ¬ì˜€ë‹¤
- glob íŒ¨í„´ ë§¤ì¹­ì„ ì§€ì›í–ˆë‹¤
- ê²½ë¡œë³„ë¡œ ë‹¤ë¥¸ linterë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì—ˆë‹¤
- Node.js ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆë‹¤

### Lefthook

https://lefthook.dev/

Lefthookì˜ ì£¼ìš” íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

- Go ì–¸ì–´ë¡œ ì‘ì„±ë˜ì–´ ì‹¤í–‰ ì†ë„ê°€ ë¹¨ëë‹¤
- ë³‘ë ¬ ì‹¤í–‰ì„ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆì—ˆë‹¤
  - ë¦°íŠ¸ë§Œ ì‹¤í–‰í•˜ëŠ” ê²½ìš°ì—” í° ì°¨ì´ê°€ ì—†ì§€ë§Œ, ë³µì¡í•œ ì‘ì—…ì—ì„œëŠ” ìœ ë¦¬í–ˆë‹¤
- í¬ë¡œìŠ¤ í”Œë«í¼ì„ ì§€ì›í–ˆë‹¤
- ì˜ì¡´ì„± ì—†ëŠ” ë‹¨ì¼ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°€ë³ê³  ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í–ˆë‹¤
- glob íŒ¨í„´ì„ ì§€ì›í•˜ì—¬ ìœ ì—°í•œ ì„¤ì •ì´ ê°€ëŠ¥í–ˆë‹¤
- lint-staged ì—†ì´ë„ stagedëœ íŒŒì¼ë§Œ ê²€ì‚¬í•  ìˆ˜ ìˆì—ˆë‹¤
- í›… ë§¤ë‹ˆì € ê¸°ëŠ¥ê³¼ lint-staged ê¸°ëŠ¥ì„ ëª¨ë‘ ê°€ì§€ê³  ìˆì—ˆë‹¤
- `stage_fixed: true` ì˜µì…˜ìœ¼ë¡œ ìë™ ìˆ˜ì •ëœ íŒŒì¼ì„ ìë™ìœ¼ë¡œ stageí•˜ëŠ” ê¸°ëŠ¥ì´ ìˆì—ˆë‹¤

## ì‚¬ìš© ë°©ì‹ ë¹„êµ ë° ì •ë¦¬

### ê¸°ë³¸ Husky ë°©ì‹

```bash
#!/bin/sh
echo "Start Linting and Formatting ğŸ’¥"

npm run lint

if [ $? -eq 0 ]; then
  echo "âœ… Complete! ğŸš€"
else
  echo "âŒ Error! ğŸ›‘"
  exit 1
fi
```

ì´ ë°©ì‹ì˜ ë¬¸ì œì ì€ ì»¤ë°‹ëœ ì˜ì—­ë§Œì´ ì•„ë‹ˆë¼ í”„ë¡œì íŠ¸ ì „ì²´ì— ëŒ€í•´ lintê°€ ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤. HuskyëŠ” stagedëœ íŒŒì¼ë§Œ í•„í„°ë§í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.

**í•´ê²° ë°©ë²•**: lint-stagedë¥¼ ì´ìš©í•´ stagedëœ íŒŒì¼ë§Œ ì²˜ë¦¬í•˜ë„ë¡ í•˜ë©´ ì†ë„ë¥¼ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆì—ˆë‹¤.

### husky + lint-staged ì¡°í•©ìœ¼ë¡œ ê°œì„ 

```bash
#!/bin/sh
echo "Start Linting and Formatting ğŸ’¥"

npx lint-staged

if [ $? -eq 0 ]; then
  echo "âœ… Complete! ğŸš€"
else
  echo "âŒ Error! ğŸ›‘"
  exit 1
fi
```

```json
// package.json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx,json,css,scss}": [
      "eslint --fix",
      "prettier --write"
    ]
  }
}
```

**ì¥ì **

- stagedëœ íŒŒì¼ë§Œ ê²€ì‚¬í•´ì„œ ë¹ ë¦„
- ë‚´ê°€ ìˆ˜ì •í•œ íŒŒì¼ë§Œ ê²€ì‚¬
- ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ë°©ì‹ (ë ˆí¼ëŸ°ìŠ¤ ë§ìŒ)
- npm/pnpm ìƒíƒœê³„ì™€ ì˜ ë§ìŒ
- ì•ˆì •ì ì´ê³  ê²€ì¦ë¨

**ë‹¨ì **

- huskyì™€ lint-staged ë‘ ê°œì˜ ë„êµ¬ í•„ìš”
- ì„¤ì •ì´ package.jsonê³¼ .husky í´ë”ë¡œ ë¶„ì‚°
- huskyëŠ” bash ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜ì´ë¼ ê°€ë…ì„±ì´ ë–¨ì–´ì§

### lefthookìœ¼ë¡œ ê°œì„ 

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— lefthook.yml íŒŒì¼ì„ ìƒì„±

```yaml
# lefthook.yml

pre-commit:
  parallel: true
  commands:
    lint:
      glob: "*.{js,jsx,ts,tsx,json,css,scss}"
      run: npm run lint {staged_files}
```

**ì¥ì **

- stagedëœ íŒŒì¼ë§Œ ê²€ì‚¬í•´ì„œ ë¹ ë¦„
- í•˜ë‚˜ì˜ ë„êµ¬ë¡œ ëª¨ë“  ê²ƒ ê´€ë¦¬ (lint-staged ë¶ˆí•„ìš”)
- YAML ê¸°ë°˜ ì„¤ì •ìœ¼ë¡œ ê°€ë…ì„± ì¢‹ìŒ
- parallel: trueë¡œ ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥
- Goë¡œ ì‘ì„±ë˜ì–´ ì‹¤í–‰ ì†ë„ê°€ ë” ë¹ ë¦„
- ë” ë§ì€ ê¸°ëŠ¥ (skip, follow, interactive ë“±)

**ë‹¨ì **

- huskyë³´ë‹¤ ëœ ëŒ€ì¤‘ì  (ë ˆí¼ëŸ°ìŠ¤ ì ìŒ)
- íŒ€ì›ë“¤ì´ ìµìˆ™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

## ëª¨ë…¸ë ˆí¬ ì„¤ì •

```yaml
# lefthook.yml

pre-commit:
  skip: # GUI ë„êµ¬ì—ì„œ ì„¤ì •ë˜ì§€ ì•Šë„ë¡
    - run: test -z "$TERM" || test "$TERM" = "dumb"
      reason: "Skipping in GUI environment (Fork, SourceTree, etc.)"
  parallel: true
  commands:
    # í”„ë¡ íŠ¸ì—”ë“œ ì•±
    lint-frontend:
      glob: "apps/frontend/**/*.{js,jsx,ts,tsx,json,css,scss}"
      run: eslint --fix {staged_files}

    # ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
    lint-admin:
      glob: "apps/admin/**/*.{js,ts,vue,json,css,scss}"
      run: pnpm exec prettier --check {staged_files}

    # ëª¨ë°”ì¼ ì›¹
    lint-mobile:
      glob: "apps/mobile/**/*.{js,jsx,ts,tsx}"
      root: "apps/mobile/"
      run: pnpm exec eslint {staged_files}

    # API ì„œë²„
    lint-api:
      glob: "apps/api/**/*.{js,ts,json}"
      run: eslint --fix {staged_files}

    # ê³µí†µ íŒ¨í‚¤ì§€
    lint-packages:
      glob: "packages/**/*.{js,jsx,ts,tsx,json,css,scss}"
      run: eslint --fix {staged_files}

    # ë£¨íŠ¸ ì„¤ì • íŒŒì¼
    lint-root-config:
      glob: "*.{json,yml,yaml,md}"
      run: prettier --check {staged_files}

pre-push:
  skip:
    - run: test -z "$TERM" || test "$TERM" = "dumb"
      reason: "Skipping in GUI environment (Fork, SourceTree, etc.)"
  parallel: true
  commands:
    # í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
    test-frontend:
      glob: "apps/frontend/**/*"
      run: pnpm --filter frontend test

    # ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸
    test-admin:
      glob: "apps/admin/**/*"
      run: pnpm --filter admin test

    # API ì„œë²„ í…ŒìŠ¤íŠ¸
    test-api:
      glob: "apps/api/**/*"
      run: pnpm --filter api test
```
